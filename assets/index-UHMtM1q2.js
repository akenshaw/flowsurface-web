var It=Object.defineProperty;var Bt=(o,e,s)=>e in o?It(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var x=(o,e,s)=>(Bt(o,typeof e!="symbol"?e+"":e,s),s),Mt=(o,e,s)=>{if(!e.has(o))throw TypeError("Cannot "+s)};var t=(o,e,s)=>(Mt(o,e,"read from private field"),s?s.call(o):e.get(o)),l=(o,e,s)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,s)},h=(o,e,s,i)=>(Mt(o,e,"write to private field"),i?i.call(o,s):e.set(o,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();var L,P,W;class At{constructor(e,s,i,n,r,a,c,u,d,S,E){x(this,"zoomYLevel",.2222);x(this,"zoomXLevel",0);l(this,L,void 0);l(this,P,void 0);l(this,W,void 0);x(this,"tickSize");h(this,L,new Nt(this,e,s,i)),h(this,P,new Ut(this,n,r,a,c)),h(this,W,new Wt(this,u,d,S,E)),t(this,P).canvas.addEventListener("wheel",p=>{p.preventDefault();const y=5e-4/(.01-.001);let V=this.zoomYLevel-(p.deltaY>0?-y:y);this.zoomYLevel=Math.max(0,Math.min(V,1)),t(this,L).zoomY(this.zoomYLevel),t(this,P).zoomY(this.zoomYLevel)}),t(this,W).canvas.addEventListener("wheel",p=>{p.preventDefault();const y=5e-4/(.01-.001);let V=this.zoomXLevel+(p.deltaY>0?-y:y);this.zoomXLevel=Math.max(0,Math.min(V,1)),t(this,L).zoomX(this.zoomXLevel),t(this,W).zoomX(this.zoomXLevel)});const f=document.querySelector("#ticksize-select");f.addEventListener("change",p=>{const y=this.tickSize*f.value;console.log("new tick size:",y),t(this,L).bucketSize=y,t(this,L).maxQuantity=20,t(this,P).bucketSize=y})}updateData(e){t(this,L).updateData(e.kline,e.tradesBuffer),t(this,P).updateData(e.kline,e.depth),t(this,W).updateData(e.kline)}resetData(){t(this,L).resetData(),t(this,P).resetData(),t(this,W).resetData()}}L=new WeakMap,P=new WeakMap,W=new WeakMap;var ft,m,O,M,I,R,B,q,G,T,J,nt,k,ot,rt,Y;class Nt{constructor(e,s,i,n){l(this,ft,void 0);l(this,m,void 0);l(this,O,void 0);l(this,M,void 0);l(this,I,[]);l(this,R,[]);l(this,B,void 0);l(this,q,[]);l(this,G,void 0);l(this,T,void 0);l(this,J,void 0);l(this,nt,60);l(this,k,void 0);l(this,ot,.997);l(this,rt,1.003);l(this,Y,30);x(this,"bucketSize");h(this,ft,e),h(this,m,s),h(this,O,i),h(this,M,n),h(this,k,Math.round(1*60*1e3/(30*60*1e3)*(t(this,O)-t(this,nt)))),this.tradesDrawType=0,this.maxQuantity=20}zoomY(e){const a=.001+.009000000000000001*e,c=.001+(.01-.001)*e;h(this,ot,Math.round((1-a)*1e4)/1e4),h(this,rt,Math.round((1+c)*1e4)/1e4)}zoomX(e){h(this,Y,30+-20*e),h(this,k,Math.round(1*60*1e3/(t(this,Y)*60*1e3)*(t(this,O)-t(this,nt))))}resetData(){h(this,I,[]),h(this,R,[]),h(this,B,null),h(this,q,[]),h(this,G,null),h(this,T,null),h(this,J,null)}updateData(e,s){const{k:{t:i,T:n,o:r,h:a,l:c,c:u}}=e;h(this,T,Math.min((Number(a)+Number(c))/2*t(this,ot),c)),h(this,J,Math.max((Number(a)+Number(c))/2*t(this,rt),a)),t(this,G)!==r&&(t(this,B)&&(t(this,I).push(t(this,B)),t(this,R).push(t(this,q)),t(this,I).length>60&&(t(this,I).shift(),t(this,R).shift()),h(this,q,[])),h(this,G,r)),h(this,B,{startTime:i,endTime:n,openPrice:r,highPrice:a,lowPrice:c,closePrice:u}),t(this,q).push(s),this.drawStart()}drawStart(){if(t(this,m).clearRect(0,0,t(this,O),t(this,M)),t(this,I).length>0){const e=t(this,B).startTime-t(this,Y)*60*1e3;t(this,I).forEach((s,i)=>{const n=t(this,R)[i],r=Math.round((s.startTime-e)/(t(this,Y)*60*1e3)*(t(this,O)-t(this,k)));this.drawDataPoint(n,s,r)})}this.drawDataPoint(t(this,q),t(this,B),Math.round(t(this,O)-t(this,k)))}drawDataPoint(e,s,i){const n=t(this,M)/(t(this,J)-t(this,T)),r=Math.round(t(this,M)-(s.openPrice-t(this,T))*n),a=Math.round(t(this,M)-(s.highPrice-t(this,T))*n),c=Math.round(t(this,M)-(s.lowPrice-t(this,T))*n),u=Math.round(t(this,M)-(s.closePrice-t(this,T))*n);this.drawKlineAt(i,a-2),this.drawKlineAt(i,c+2);const S=[].concat(...e).reduce((f,p)=>{const y=Math.round(p.y/this.bucketSize)*this.bucketSize,V=`${y}-${p.m}`;return f[V]||(f[V]={...p,y,q:0}),f[V].q+=p.q,f},{}),E=Math.max(...Object.values(S).map(f=>f.q));this.maxQuantity=E>this.maxQuantity?E:this.maxQuantity,Object.values(S).forEach(f=>{const p=Math.round(t(this,M)-(f.y-t(this,T))*n),y=this.scaleQuantity(f.q);this.drawTradesAt(i,p,f.m,y)}),t(this,m).beginPath(),t(this,m).moveTo(i+t(this,k)/2,r),t(this,m).lineTo(i+t(this,k)/2,u),t(this,m).strokeStyle=u<r?"#9BE6D1":"#E6A1A0",t(this,m).stroke()}drawKlineAt(e,s){t(this,m).beginPath(),t(this,m).moveTo(e+5,s),t(this,m).lineTo(e+t(this,k)-5,s),t(this,m).strokeStyle="rgba(200, 200, 200, 0.5)",t(this,m).stroke()}drawTradesAt(e,s,i,n){t(this,m).beginPath(),i?(t(this,m).moveTo(e-4+t(this,k)/2,s),t(this,m).lineTo(e-4+t(this,k)/2-n,s),t(this,m).strokeStyle="rgba(192, 80, 77, 1)"):(t(this,m).moveTo(e+4+t(this,k)/2,s),t(this,m).lineTo(e+4+t(this,k)/2+n,s),t(this,m).strokeStyle="rgba(81, 205, 160, 1)"),t(this,m).stroke()}scaleQuantity(e){const n=t(this,k)/2-4;return 0+(e-.001)*(n-0)/(this.maxQuantity-.001)}}ft=new WeakMap,m=new WeakMap,O=new WeakMap,M=new WeakMap,I=new WeakMap,R=new WeakMap,B=new WeakMap,q=new WeakMap,G=new WeakMap,T=new WeakMap,J=new WeakMap,nt=new WeakMap,k=new WeakMap,ot=new WeakMap,rt=new WeakMap,Y=new WeakMap;var pt,g,$,C,tt,A,D,H,at,ht;class Ut{constructor(e,s,i,n,r){l(this,pt,void 0);l(this,g,void 0);l(this,$,void 0);l(this,C,void 0);l(this,tt,void 0);l(this,A,void 0);l(this,D,void 0);l(this,H,void 0);l(this,at,.997);l(this,ht,1.003);x(this,"bucketSize");h(this,pt,e),h(this,g,s),this.canvas=i,h(this,$,n),h(this,C,r),this.maxQuantity=20}zoomY(e){const a=.001+.009000000000000001*e,c=.001+(.01-.001)*e;h(this,at,Math.round((1-a)*1e4)/1e4),h(this,ht,Math.round((1+c)*1e4)/1e4)}resetData(){h(this,tt,null),h(this,A,null),h(this,D,null),h(this,H,null)}updateData(e,s){const{k:{o:i,h:n,l:r,c:a}}=e;h(this,tt,{openPrice:i,highPrice:n,lowPrice:r,closePrice:a});const{asks:c,bids:u}=s;h(this,A,{asks:c,bids:u}),h(this,D,Math.min((Number(n)+Number(r))/2*t(this,at),r)),h(this,H,Math.max((Number(n)+Number(r))/2*t(this,ht),n)),this.drawStart()}drawStart(){t(this,g).clearRect(0,0,t(this,$),t(this,C));const e=t(this,C)/(t(this,H)-t(this,D)),{closePrice:s,openPrice:i}=t(this,tt),n=Math.round(t(this,C)-(s-t(this,D))*e),r=Math.round(t(this,C)-(i-t(this,D))*e),a=n>r?"#C0504E":n<r?"#51CDA0":"#c8c8c8";if(this.drawTextAt(n,s,a),this.drawTextAt(t(this,C)-10,Math.round(t(this,D)),"#c8c8c8"),this.drawTextAt(15,Math.round(t(this,H)),"#c8c8c8"),this.maxQuantity=20,t(this,A).asks&&t(this,A).bids){const c=E=>E.reduce((f,p)=>{const y=Math.round(p[0]/this.bucketSize)*this.bucketSize;return f[y]||(f[y]=0),f[y]+=parseFloat(p[1]),f},{}),u=c(t(this,A).asks),d=c(t(this,A).bids),S=[...Object.values(u),...Object.values(d)];this.maxQuantity=Math.max.apply(null,S),Object.entries(u).forEach(([E,f])=>{const p=Math.round(t(this,C)-(E-t(this,D))*e);this.drawLineAt(p,"#C0504E",f)}),Object.entries(d).forEach(([E,f])=>{const p=Math.round(t(this,C)-(E-t(this,D))*e);this.drawLineAt(p,"#51CDA0",f)})}t(this,g).font="10px monospace",t(this,g).fillStyle="#c8c8c8",t(this,g).fillText(Math.round(this.maxQuantity),t(this,$)-40,40)}drawLineAt(e,s,i){const n=i/this.maxQuantity*(t(this,$)-80);t(this,g).beginPath(),t(this,g).moveTo(80,e),t(this,g).lineTo(n+80,e),t(this,g).strokeStyle=s,t(this,g).lineWidth=1,t(this,g).stroke()}drawTextAt(e,s,i){t(this,g).font="12px monospace",t(this,g).fillStyle=i,t(this,g).fillText(s,10,e)}}pt=new WeakMap,g=new WeakMap,$=new WeakMap,C=new WeakMap,tt=new WeakMap,A=new WeakMap,D=new WeakMap,H=new WeakMap,at=new WeakMap,ht=new WeakMap;var bt,b,N,w,z,U,et,st,lt,v,F;class Wt{constructor(e,s,i,n,r){l(this,bt,void 0);l(this,b,void 0);l(this,N,void 0);l(this,w,void 0);l(this,z,[]);l(this,U,void 0);l(this,et,void 0);l(this,st,void 0);l(this,lt,60);l(this,v,void 0);l(this,F,30);h(this,bt,e),h(this,b,s),this.canvas=i,h(this,N,n),h(this,w,r),h(this,v,Math.round(1*60*1e3/(t(this,F)*60*1e3)*(t(this,N)-t(this,lt))))}zoomX(e){h(this,F,30+-20*e),h(this,v,Math.round(1*60*1e3/(t(this,F)*60*1e3)*(t(this,N)-t(this,lt))))}resetData(){h(this,z,[]),h(this,U,null),h(this,et,null),h(this,st,null)}updateData(e){const{k:{t:s,T:i,v:n,V:r}}=e,a=n-r;h(this,st,Math.round(t(this,z).reduce((c,u)=>Math.max(c,u.buyVolume,u.sellVolume),Math.max(r,a)))),t(this,et)!==s&&(t(this,U)&&(t(this,z).push(t(this,U)),t(this,z).length>60&&t(this,z).shift()),h(this,et,s)),h(this,U,{startTime:s,endTime:i,buyVolume:r,sellVolume:a}),this.drawStart()}drawStart(){if(t(this,b).clearRect(0,0,t(this,N),t(this,w)),t(this,z).length>0){const e=t(this,U).startTime-t(this,F)*60*1e3;t(this,z).forEach((s,i)=>{const n=Math.round((s.startTime-e)/(t(this,F)*60*1e3)*(t(this,N)-t(this,v)));this.drawDataPoint(s,n)})}this.drawDataPoint(t(this,U),Math.round(t(this,N)-t(this,v)))}drawDataPoint(e,s){const i=(t(this,w)-20)/t(this,st),n=Math.max(0,Math.min(t(this,w)-20,Math.round(t(this,w)-20-e.buyVolume*i))),r=Math.max(0,Math.min(t(this,w)-20,Math.round(t(this,w)-20-e.sellVolume*i)));t(this,b).beginPath(),t(this,b).moveTo(s,0),t(this,b).lineTo(s,t(this,w)-20),t(this,b).strokeStyle="rgba(200, 200, 200, 0.4)",t(this,b).lineWidth=1,t(this,b).stroke(),this.drawTimeLabel(s,e.startTime),this.drawKlineAt(s+t(this,v)/2+t(this,v)/8,n,"#51CDA0"),this.drawKlineAt(s+t(this,v)/2-t(this,v)/8,r,"#C0504E")}drawKlineAt(e,s,i){t(this,b).beginPath(),t(this,b).moveTo(e,t(this,w)-20),t(this,b).lineTo(e,s),t(this,b).strokeStyle=i,t(this,b).lineWidth=t(this,v)/6,t(this,b).stroke()}drawTimeLabel(e,s){const i=new Date(s),n=i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0");t(this,b).font="10px monospace",t(this,b).fillStyle="#c8c8c8",t(this,b).fillText(n,e,t(this,w)-5)}}bt=new WeakMap,b=new WeakMap,N=new WeakMap,w=new WeakMap,z=new WeakMap,U=new WeakMap,et=new WeakMap,st=new WeakMap,lt=new WeakMap,v=new WeakMap,F=new WeakMap;async function Lt(){let e=Date.now()-25*60*60*1e3,s=e+60*60*1e3,i={};const[n,r]=await Promise.all([Qt(),Zt()]),a=Object.keys(n).filter(d=>!["BTCSTUSDT","CVCUSDT","DOGEUSDC","COCOSUSDT","BNBBTC","ETHBTC","RAYUSDT","HNTUSDT","SCUSDT","WIFUSDT","BTSUSDT","TOMOUSDT","FTTUSDT","SRMUSDT"].includes(d)&&!d.includes("_")),c=a.map(d=>qt(d,e,s)),u=await Promise.all(c);return a.forEach((d,S)=>{r.hasOwnProperty(d)&&(i[d]={...n[d],...r[d],...u[S]})}),i}async function qt(o,e,s){let i;try{i=await Ft(o);const r=await(await fetch(`https://fapi.binance.com/futures/data/openInterestHist?symbol=${o}&period=30m&limit=1&startTime=${e}&endTime=${s}`)).json(),a=Math.round(r[0].sumOpenInterest),c=Math.round((i-a)/a*1e4)/100;return{open_interest:i,OI_24hrChange:c}}catch{return{open_interest:i,OI_24hrChange:NaN}}}async function Ft(o){try{const s=await(await fetch(`https://fapi.binance.com/fapi/v1/openInterest?symbol=${o}`)).json();return Number(s.openInterest)}catch(e){return console.log(e,o),NaN}}async function Qt(){let o={};const s=await(await fetch("https://fapi.binance.com/fapi/v1/premiumIndex")).json();for(let i of s){let n=i.symbol,r=parseFloat(i.lastFundingRate)*100,a=i.markPrice;o[n]={funding_rate:Math.round(r*1e4)/1e4,mark_price:Math.round(a*1e4)/1e4}}return o}async function Zt(){let o={};const s=await(await fetch("https://fapi.binance.com/fapi/v1/ticker/24hr")).json();for(let i of s){let n=i.symbol,r=i.quoteVolume,a=i.priceChangePercent;o[n]={change:Number(a),volume:Math.round(r)}}return o}var Q,Z,ct,_,it;class jt{constructor(){l(this,Q,void 0);l(this,Z,[]);l(this,ct,[]);l(this,_,void 0);l(this,it,!0);x(this,"last_update_id");x(this,"order_book");console.log("Initializing WebSocketService")}createWebSocket(e,s){t(this,Q)&&t(this,Q).readyState===1&&(console.log("Closing existing websocket connection for symbol:",t(this,_).toUpperCase()),this.order_book.shouldRefresh=!1,t(this,Q).close(),h(this,it,!0),this.order_book=null,h(this,Z,[])),console.log("Creating websocket connection for symbol:",e),h(this,_,e.toLowerCase()),_t(t(this,_)).then(i=>{h(this,Q,new WebSocket(`wss://fstream.binance.com/stream?streams=${t(this,_)}@aggTrade/${t(this,_)}@depth@100ms/${t(this,_)}@kline_1m`)),this.setupEventListeners(t(this,Q),s),this.last_update_id=i.lastUpdateId,this.order_book=new Vt(t(this,_),i.bids,i.asks)}).catch(i=>{console.error("Error initializing the order book:",i)})}setupEventListeners(e,s){e.addEventListener("open",()=>{this.order_book.refresh_order_book(t(this,_)),console.log("New WebSocket connection opened")}),e.addEventListener("close",()=>{console.log("Previous WebSocket connection was closed")});let i=!1;e.addEventListener("message",async n=>{let r=JSON.parse(n.data);if(r.stream.endsWith("@aggTrade")){let a=r.data;t(this,Z).push({x:a.T,y:parseFloat(a.p),q:parseFloat(a.q),m:a.m})}else if(r.stream.endsWith("@depth@100ms")){if(i){console.log("isHandlingDepth:",i);return}i=!0,await this.handleDepth(r.data),i=!1}else r.stream.endsWith("@kline_1m")&&(h(this,ct,r.data),s({kline:t(this,ct),depth:this.order_book.order_book,tradesBuffer:t(this,Z)}),h(this,Z,[]))})}async handleDepth(e){let s=e.u,i=e.U,n=e.pu;if(s<this.last_update_id){console.log("finalUpdateId < last_update_id",s,this.last_update_id);return}if(t(this,it))if(i<=this.last_update_id&&this.last_update_id<=s)console.log("First processed event succeeded"),h(this,it,!1);else{await this.reinitializeOrderBook(t(this,_));return}else if(n!=this.last_update_id){await this.reinitializeOrderBook(t(this,_));return}await this.order_book.update_order_book(e.b,e.a),this.last_update_id=s}async reinitializeOrderBook(e){console.log("Out of sync, reinitializing order book...");const s=await _t(e);this.last_update_id=s.lastUpdateId,this.order_book.order_book=this.order_book.initialize_order_book(s.bids,s.asks),h(this,Z,[])}}Q=new WeakMap,Z=new WeakMap,ct=new WeakMap,_=new WeakMap,it=new WeakMap;class Vt{constructor(e,s,i){x(this,"currentSymbol");x(this,"order_book");x(this,"shouldRefresh",!0);console.log("initializing new OrderBook class"),this.currentSymbol=e,this.order_book=this.initialize_order_book(s,i)}initialize_order_book(e,s){let i=e.map(r=>r.map(Number)),n=s.map(r=>r.map(Number));return{bids:i,asks:n}}async refresh_order_book(e){let s=new AbortController,i=setInterval(async()=>{if(!this.shouldRefresh||e!==this.currentSymbol)clearInterval(i),s.abort();else{s=new AbortController;try{let n=await _t(e,{signal:s.signal});this.order_book=this.initialize_order_book(n.bids,n.asks)}catch(n){n.name==="AbortError"?console.log("Fetch operation aborted"):console.error("Error fetching order book:",n)}}},6e3)}async update_order_book(e,s){let i=e.map(r=>r.map(Number)),n=s.map(r=>r.map(Number));[this.order_book.bids,this.order_book.asks]=await this.prepare_order_book(this.order_book.bids,this.order_book.asks,i,n)}async prepare_order_book(e,s,i,n){try{const r=new Map([...e,...i].filter(d=>d[0]>=e[e.length-1][0])),a=new Map([...s,...n].filter(d=>d[0]<=s[s.length-1][0]));let c=Array.from(r.entries()).filter(d=>d[1]!==0).sort((d,S)=>S[0]-d[0]),u=Array.from(a.entries()).filter(d=>d[1]!==0).sort((d,S)=>d[0]-S[0]);return c[0][0]>=u[0][0]&&(c=c.filter(d=>d[0]<i[i.length-1][0]),u=u.filter(d=>d[0]>n[0][0]),console.log("Error: bids[0] >= asks[0], rehandled to: ",c[0][0],u[0][0])),[c,u]}catch(r){return console.error("Error preparing order book:",r),[i,n]}}}async function _t(o){return await(await fetch(`https://fapi.binance.com/fapi/v1/depth?symbol=${o}&limit=500`)).json()}const gt=["btn1","btn2","btn3","btn4"],Rt=["tickers-menu","menu2","menu3","settings-menu"],Yt=[Pt,Dt,Dt,Xt];for(let o=0;o<gt.length;o++){const e=document.getElementById(gt[o]);e.addEventListener("click",Yt[o]),e.addEventListener("click",function(){xt(gt[o],Rt[o])})}const Tt=document.getElementById("tickers-menu"),Ct=document.getElementById("settings-menu");let vt=document.getElementById("ticker-search"),mt;vt.addEventListener("keyup",function(){mt=this.value.toLowerCase();let o=document.querySelectorAll("#ticker-table tbody tr");for(let e of o)e.cells[0].textContent.toLowerCase().includes(mt)?e.style.display="":e.style.display="none"});function $t(o){ee(o),vt.value="",mt="";let e=document.querySelectorAll("#ticker-table tbody tr");for(let s of e)s.style.display="";Pt()}function Ht(){const o=new Date,e=o.getHours().toString().padStart(2,"0"),s=o.getMinutes().toString().padStart(2,"0"),i=o.getSeconds().toString().padStart(2,"0");return e+":"+s+":"+i}function zt(){const o=document.getElementById("tickers-update-info");o.textContent="Last updated at "+Ht()}window.onload=function(){Lt().then(o=>{Ot(o),zt()})};window.addEventListener("resize",function(){console.log("resize")});function Pt(){vt.value="",mt="";let o=document.querySelectorAll("#ticker-table tbody tr");for(let e of o)e.style.display="";Tt.style.display=Tt.style.display==="none"?"block":"none",xt("btn1","tickers-menu")}function Dt(){console.log("show menu")}function Xt(){Ct.style.display=Ct.style.display==="none"?"block":"none",xt("btn4","settings-menu")}function xt(o,e){const s=document.getElementById(e),i=document.getElementById(o);s.style.display==="block"?i.classList.add("active"):i.classList.remove("active")}const St=document.getElementById("tickers-update-btn");St.addEventListener("click",function(){St.disabled=!0,Lt().then(o=>{Ot(o),zt()})});function Et(o){return o>=1e9?(o/1e9).toFixed(2)+"b":o>=1e6?(o/1e6).toFixed(2)+"m":o>=1e3?(o/1e3).toFixed(2)+"k":o}function kt(o,e,s){let i;return e==="mark_price"?o>10?i=Math.round(o*100)/100:i=Math.round(o*1e4)/1e4:e==="volume"?(i=Et(o),i="$"+i):e==="open_interest"&&(i=Et(o*s),i="$"+i),i}function Ot(o){let e=document.querySelector("#tickers-menu table tbody"),s=Object.entries(o);s.sort(([,i],[,n])=>n.volume-i.volume);for(let i=0;i<s.length;i++){let[n,r]=s[i],a;i<e.rows.length?a=e.rows[i]:(a=e.insertRow(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell()),a.classList.add("table-row"),a.cells[0].textContent=n,a.cells[1].textContent=kt(r.mark_price,"mark_price",r.mark_price),a.cells[2].textContent=(Math.round(r.change*100)/100).toFixed(2)+"%",a.cells[3].textContent=r.funding_rate+"%",a.cells[4].textContent=kt(r.open_interest,"open_interest",r.mark_price),a.cells[5].textContent=r.OI_24hrChange+"%",a.cells[6].textContent=kt(r.volume,"volume",r.mark_price);const c=Math.min(Math.abs(r.change/100),1),u=Math.max(Math.abs(r.funding_rate*50),.2);r.change<0?a.style.backgroundColor="rgba(192, 80, 78, "+c*1.5+")":a.style.backgroundColor="rgba(81, 205, 160, "+c+")",r.funding_rate>0?a.cells[3].style.color="rgba(212, 80, 78, "+u*1.5+")":a.cells[3].style.color="rgba(81, 246, 160, "+u*1.5+")",a.addEventListener("click",function(){$t(n)})}St.disabled=!1}let dt=document.createElement("canvas");dt.id="canvas1";dt.style.position="absolute";dt.style.left="0px";dt.style.top="0px";document.body.appendChild(dt);let j=document.querySelector("#canvas1"),Kt=j.getContext("2d");j.width=window.innerWidth*.9;j.height=window.innerHeight*.9;let yt=document.createElement("canvas");yt.id="canvas2";yt.style.position="absolute";yt.style.left=j.width+"px";document.body.appendChild(yt);let X=document.querySelector("#canvas2"),Gt=X.getContext("2d");X.width=window.innerWidth*.1;X.height=window.innerHeight*.9;let ut=document.createElement("canvas");ut.id="canvas3";ut.style.position="absolute";ut.style.left="0px";ut.style.top=j.height+"px";document.body.appendChild(ut);let K=document.querySelector("#canvas3"),Jt=K.getContext("2d");K.width=j.width;K.height=window.innerHeight*.1;const te=new jt,wt=new At(Kt,j.width,j.height,Gt,X,X.width,X.height,Jt,K,K.width,K.height);function ee(o){wt.resetData(),se(o).then(e=>{wt.tickSize=e,document.querySelector("#ticksize-select").dispatchEvent(new Event("change")),te.createWebSocket(o,s=>wt.updateData(s))})}async function se(o){let i=(await(await fetch("https://fapi.binance.com/fapi/v1/exchangeInfo")).json()).symbols.find(n=>n.symbol===o);return i?i.filters[0].tickSize:null}
