var Ct=Object.defineProperty;var Et=(r,e,i)=>e in r?Ct(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i;var v=(r,e,i)=>(Et(r,typeof e!="symbol"?e+"":e,i),i),gt=(r,e,i)=>{if(!e.has(r))throw TypeError("Cannot "+i)};var t=(r,e,i)=>(gt(r,e,"read from private field"),i?i.call(r):e.get(r)),h=(r,e,i)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,i)},c=(r,e,i,s)=>(gt(r,e,"write to private field"),s?s.call(r,i):e.set(r,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();var D,O,Q;class Lt{constructor(e,i,s,o,n,a,l,u,d,k,S){v(this,"zoomYLevel",.2222);v(this,"zoomXLevel",0);h(this,D,void 0);h(this,O,void 0);h(this,Q,void 0);v(this,"tickSize");c(this,D,new Dt(this,e,i,s)),c(this,O,new zt(this,o,n,a,l)),c(this,Q,new Pt(this,u,d,k,S)),t(this,O).canvas.addEventListener("wheel",p=>{p.preventDefault();const y=5e-4/(.01-.001);let F=this.zoomYLevel-(p.deltaY>0?-y:y);this.zoomYLevel=Math.max(0,Math.min(F,1)),t(this,D).zoomY(this.zoomYLevel),t(this,O).zoomY(this.zoomYLevel)}),t(this,Q).canvas.addEventListener("wheel",p=>{p.preventDefault();const y=5e-4/(.01-.001);let F=this.zoomXLevel+(p.deltaY>0?-y:y);this.zoomXLevel=Math.max(0,Math.min(F,1)),t(this,D).zoomX(this.zoomXLevel),t(this,Q).zoomX(this.zoomXLevel)});const m=document.querySelector("#ticksize-select");m.addEventListener("change",p=>{const y=this.tickSize*m.value;console.log("new tick size:",y),t(this,D).bucketSize=y,t(this,D).maxQuantity=20,t(this,O).bucketSize=y})}updateData(e){t(this,D).updateData(e.kline,e.tradesBuffer),t(this,O).updateData(e.kline,e.depth),t(this,Q).updateData(e.kline)}}D=new WeakMap,O=new WeakMap,Q=new WeakMap;var ct,f,z,T,B,Y,A,Z,X,E,K,G,w,J,tt,V;class Dt{constructor(e,i,s,o){h(this,ct,void 0);h(this,f,void 0);h(this,z,void 0);h(this,T,void 0);h(this,B,[]);h(this,Y,[]);h(this,A,void 0);h(this,Z,[]);h(this,X,void 0);h(this,E,void 0);h(this,K,void 0);h(this,G,60);h(this,w,void 0);h(this,J,.997);h(this,tt,1.003);h(this,V,30);v(this,"bucketSize");c(this,ct,e),c(this,f,i),c(this,z,s),c(this,T,o),c(this,w,Math.round(1*60*1e3/(30*60*1e3)*(t(this,z)-t(this,G)))),this.tradesDrawType=0,this.maxQuantity=20}zoomY(e){const a=.001+.009000000000000001*e,l=.001+(.01-.001)*e;c(this,J,Math.round((1-a)*1e4)/1e4),c(this,tt,Math.round((1+l)*1e4)/1e4)}zoomX(e){c(this,V,30+-20*e),c(this,w,Math.round(1*60*1e3/(t(this,V)*60*1e3)*(t(this,z)-t(this,G))))}updateData(e,i){const{k:{t:s,T:o,o:n,h:a,l,c:u}}=e;c(this,E,Math.min((Number(a)+Number(l))/2*t(this,J),l)),c(this,K,Math.max((Number(a)+Number(l))/2*t(this,tt),a)),t(this,X)!==n&&(t(this,A)&&(t(this,B).push(t(this,A)),t(this,Y).push(t(this,Z)),t(this,B).length>60&&(t(this,B).shift(),t(this,Y).shift()),c(this,Z,[])),c(this,X,n)),c(this,A,{startTime:s,endTime:o,openPrice:n,highPrice:a,lowPrice:l,closePrice:u}),t(this,Z).push(i),this.drawStart()}drawStart(){if(t(this,f).clearRect(0,0,t(this,z),t(this,T)),t(this,B).length>0){const e=t(this,A).startTime-t(this,V)*60*1e3;t(this,B).forEach((i,s)=>{const o=t(this,Y)[s],n=Math.round((i.startTime-e)/(t(this,V)*60*1e3)*(t(this,z)-t(this,w)));this.drawDataPoint(o,i,n)})}this.drawDataPoint(t(this,Z),t(this,A),Math.round(t(this,z)-t(this,w)))}drawDataPoint(e,i,s){const o=t(this,T)/(t(this,K)-t(this,E)),n=Math.round(t(this,T)-(i.openPrice-t(this,E))*o),a=Math.round(t(this,T)-(i.highPrice-t(this,E))*o),l=Math.round(t(this,T)-(i.lowPrice-t(this,E))*o),u=Math.round(t(this,T)-(i.closePrice-t(this,E))*o);this.drawKlineAt(s,a-2),this.drawKlineAt(s,l+2);const k=[].concat(...e).reduce((m,p)=>{const y=Math.round(p.y/this.bucketSize)*this.bucketSize,F=`${y}-${p.m}`;return m[F]||(m[F]={...p,y,q:0}),m[F].q+=p.q,m},{}),S=Math.max(...Object.values(k).map(m=>m.q));this.maxQuantity=S>this.maxQuantity?S:this.maxQuantity,Object.values(k).forEach(m=>{const p=Math.round(t(this,T)-(m.y-t(this,E))*o),y=this.scaleQuantity(m.q);this.drawTradesAt(s,p,m.m,y)}),t(this,f).beginPath(),t(this,f).moveTo(s+t(this,w)/2,n),t(this,f).lineTo(s+t(this,w)/2,u),t(this,f).strokeStyle=u<n?"#9BE6D1":"#E6A1A0",t(this,f).stroke()}drawKlineAt(e,i){t(this,f).beginPath(),t(this,f).moveTo(e+5,i),t(this,f).lineTo(e+t(this,w)-5,i),t(this,f).strokeStyle="rgba(200, 200, 200, 0.5)",t(this,f).stroke()}drawTradesAt(e,i,s,o){t(this,f).beginPath(),s?(t(this,f).moveTo(e-4+t(this,w)/2,i),t(this,f).lineTo(e-4+t(this,w)/2-o,i),t(this,f).strokeStyle="rgba(192, 80, 77, 1)"):(t(this,f).moveTo(e+4+t(this,w)/2,i),t(this,f).lineTo(e+4+t(this,w)/2+o,i),t(this,f).strokeStyle="rgba(81, 205, 160, 1)"),t(this,f).stroke()}scaleQuantity(e){const o=t(this,w)/2-4;return 0+(e-.001)*(o-0)/(this.maxQuantity-.001)}}ct=new WeakMap,f=new WeakMap,z=new WeakMap,T=new WeakMap,B=new WeakMap,Y=new WeakMap,A=new WeakMap,Z=new WeakMap,X=new WeakMap,E=new WeakMap,K=new WeakMap,G=new WeakMap,w=new WeakMap,J=new WeakMap,tt=new WeakMap,V=new WeakMap;var lt,g,R,C,et,N,L,$,it,st;class zt{constructor(e,i,s,o,n){h(this,lt,void 0);h(this,g,void 0);h(this,R,void 0);h(this,C,void 0);h(this,et,void 0);h(this,N,void 0);h(this,L,void 0);h(this,$,void 0);h(this,it,.997);h(this,st,1.003);v(this,"bucketSize");c(this,lt,e),c(this,g,i),this.canvas=s,c(this,R,o),c(this,C,n),this.maxQuantity=20}zoomY(e){const a=.001+.009000000000000001*e,l=.001+(.01-.001)*e;c(this,it,Math.round((1-a)*1e4)/1e4),c(this,st,Math.round((1+l)*1e4)/1e4)}updateData(e,i){const{k:{o:s,h:o,l:n,c:a}}=e;c(this,et,{openPrice:s,highPrice:o,lowPrice:n,closePrice:a});const{asks:l,bids:u}=i;c(this,N,{asks:l,bids:u}),c(this,L,Math.min((Number(o)+Number(n))/2*t(this,it),n)),c(this,$,Math.max((Number(o)+Number(n))/2*t(this,st),o)),this.drawStart()}drawStart(){t(this,g).clearRect(0,0,t(this,R),t(this,C));const e=t(this,C)/(t(this,$)-t(this,L)),{closePrice:i,openPrice:s}=t(this,et),o=Math.round(t(this,C)-(i-t(this,L))*e),n=Math.round(t(this,C)-(s-t(this,L))*e),a=o>n?"#C0504E":o<n?"#51CDA0":"#c8c8c8";if(this.drawTextAt(o,i,a),this.drawTextAt(t(this,C)-10,Math.round(t(this,L)),"#c8c8c8"),this.drawTextAt(15,Math.round(t(this,$)),"#c8c8c8"),this.maxQuantity=20,t(this,N).asks&&t(this,N).bids){const l=S=>S.reduce((m,p)=>{const y=Math.round(p[0]/this.bucketSize)*this.bucketSize;return m[y]||(m[y]=0),m[y]+=parseFloat(p[1]),m},{}),u=l(t(this,N).asks),d=l(t(this,N).bids),k=[...Object.values(u),...Object.values(d)];this.maxQuantity=Math.max.apply(null,k),Object.entries(u).forEach(([S,m])=>{const p=Math.round(t(this,C)-(S-t(this,L))*e);this.drawLineAt(p,"#C0504E",m)}),Object.entries(d).forEach(([S,m])=>{const p=Math.round(t(this,C)-(S-t(this,L))*e);this.drawLineAt(p,"#51CDA0",m)})}t(this,g).font="10px monospace",t(this,g).fillStyle="#c8c8c8",t(this,g).fillText(Math.round(this.maxQuantity),t(this,R)-40,40)}drawLineAt(e,i,s){const o=s/this.maxQuantity*(t(this,R)-80);t(this,g).beginPath(),t(this,g).moveTo(80,e),t(this,g).lineTo(o+80,e),t(this,g).strokeStyle=i,t(this,g).lineWidth=1,t(this,g).stroke()}drawTextAt(e,i,s){t(this,g).font="12px monospace",t(this,g).fillStyle=s,t(this,g).fillText(i,10,e)}}lt=new WeakMap,g=new WeakMap,R=new WeakMap,C=new WeakMap,et=new WeakMap,N=new WeakMap,L=new WeakMap,$=new WeakMap,it=new WeakMap,st=new WeakMap;var dt,b,P,_,I,U,ot,nt,rt,x,j;class Pt{constructor(e,i,s,o,n){h(this,dt,void 0);h(this,b,void 0);h(this,P,void 0);h(this,_,void 0);h(this,I,[]);h(this,U,void 0);h(this,ot,void 0);h(this,nt,void 0);h(this,rt,60);h(this,x,void 0);h(this,j,30);c(this,dt,e),c(this,b,i),this.canvas=s,c(this,P,o),c(this,_,n),c(this,x,Math.round(1*60*1e3/(t(this,j)*60*1e3)*(t(this,P)-t(this,rt))))}zoomX(e){c(this,j,30+-20*e),c(this,x,Math.round(1*60*1e3/(t(this,j)*60*1e3)*(t(this,P)-t(this,rt))))}updateData(e){const{k:{t:i,T:s,v:o,V:n}}=e,a=o-n;c(this,nt,Math.round(t(this,I).reduce((l,u)=>Math.max(l,u.buyVolume,u.sellVolume),Math.max(n,a)))),t(this,ot)!==i&&(t(this,U)&&(t(this,I).push(t(this,U)),t(this,I).length>60&&t(this,I).shift()),c(this,ot,i)),c(this,U,{startTime:i,endTime:s,buyVolume:n,sellVolume:a}),this.drawStart()}drawStart(){if(t(this,b).clearRect(0,0,t(this,P),t(this,_)),t(this,I).length>0){const e=t(this,U).startTime-t(this,j)*60*1e3;t(this,I).forEach((i,s)=>{const o=Math.round((i.startTime-e)/(t(this,j)*60*1e3)*(t(this,P)-t(this,x)));this.drawDataPoint(i,o)})}this.drawDataPoint(t(this,U),Math.round(t(this,P)-t(this,x)))}drawDataPoint(e,i){const s=(t(this,_)-20)/t(this,nt),o=Math.max(0,Math.min(t(this,_)-20,Math.round(t(this,_)-20-e.buyVolume*s))),n=Math.max(0,Math.min(t(this,_)-20,Math.round(t(this,_)-20-e.sellVolume*s)));t(this,b).beginPath(),t(this,b).moveTo(i,0),t(this,b).lineTo(i,t(this,_)-20),t(this,b).strokeStyle="rgba(200, 200, 200, 0.4)",t(this,b).lineWidth=1,t(this,b).stroke(),this.drawTimeLabel(i,e.startTime),this.drawKlineAt(i+t(this,x)/2+t(this,x)/8,o,"#51CDA0"),this.drawKlineAt(i+t(this,x)/2-t(this,x)/8,n,"#C0504E")}drawKlineAt(e,i,s){t(this,b).beginPath(),t(this,b).moveTo(e,t(this,_)-20),t(this,b).lineTo(e,i),t(this,b).strokeStyle=s,t(this,b).lineWidth=t(this,x)/6,t(this,b).stroke()}drawTimeLabel(e,i){const s=new Date(i),o=s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0");t(this,b).font="10px monospace",t(this,b).fillStyle="#c8c8c8",t(this,b).fillText(o,e,t(this,_)-5)}}dt=new WeakMap,b=new WeakMap,P=new WeakMap,_=new WeakMap,I=new WeakMap,U=new WeakMap,ot=new WeakMap,nt=new WeakMap,rt=new WeakMap,x=new WeakMap,j=new WeakMap;async function vt(){let e=Date.now()-25*60*60*1e3,i=e+60*60*1e3,s={};const[o,n]=await Promise.all([Bt(),At()]),a=Object.keys(o).filter(d=>!["BTCSTUSDT","CVCUSDT","DOGEUSDC","COCOSUSDT","BNBBTC","ETHBTC","RAYUSDT","HNTUSDT","SCUSDT","WIFUSDT","BTSUSDT","TOMOUSDT","FTTUSDT","SRMUSDT"].includes(d)&&!d.includes("_")),l=a.map(d=>It(d,e,i)),u=await Promise.all(l);return a.forEach((d,k)=>{n.hasOwnProperty(d)&&(s[d]={...o[d],...n[d],...u[k]})}),s}async function It(r,e,i){let s;try{s=await Ot(r);const n=await(await fetch(`https://fapi.binance.com/futures/data/openInterestHist?symbol=${r}&period=30m&limit=1&startTime=${e}&endTime=${i}`)).json(),a=Math.round(n[0].sumOpenInterest),l=Math.round((s-a)/a*1e4)/100;return{open_interest:s,OI_24hrChange:l}}catch{return{open_interest:s,OI_24hrChange:NaN}}}async function Ot(r){try{const i=await(await fetch(`https://fapi.binance.com/fapi/v1/openInterest?symbol=${r}`)).json();return Number(i.openInterest)}catch(e){return console.log(e,r),NaN}}async function Bt(){let r={};const i=await(await fetch("https://fapi.binance.com/fapi/v1/premiumIndex")).json();for(let s of i){let o=s.symbol,n=parseFloat(s.lastFundingRate)*100,a=s.markPrice;r[o]={funding_rate:Math.round(n*1e4)/1e4,mark_price:Math.round(a*1e4)/1e4}}return r}async function At(){let r={};const i=await(await fetch("https://fapi.binance.com/fapi/v1/ticker/24hr")).json();for(let s of i){let o=s.symbol,n=s.quoteVolume,a=s.priceChangePercent;r[o]={change:Number(a),volume:Math.round(n)}}return r}var W,q,at,M,H;class Nt{constructor(){h(this,W,void 0);h(this,q,[]);h(this,at,[]);h(this,M,void 0);h(this,H,!0);v(this,"shouldRefresh",!0);v(this,"last_update_id");v(this,"order_book");console.log("worker.js: Initializing WebSocketService")}createWebSocket(e,i){t(this,W)&&t(this,W).readyState===1&&(console.log("worker.js: Closing existing websocket connection for symbol:",t(this,M).toUpperCase()),t(this,W).close(),c(this,H,!0),this.order_book=null,c(this,q,[])),console.log("worker.js: Creating websocket connection for symbol:",e),c(this,M,e.toLowerCase()),ft(t(this,M)).then(s=>{c(this,W,new WebSocket(`wss://fstream.binance.com/stream?streams=${t(this,M)}@aggTrade/${t(this,M)}@depth@100ms/${t(this,M)}@kline_1m`)),this.setupEventListeners(t(this,W),i),this.last_update_id=s.lastUpdateId,this.order_book=new Ut(s.bids,s.asks)}).catch(s=>{console.error("Error initializing the order book:",s)})}setupEventListeners(e,i){e.addEventListener("open",()=>{this.order_book.refresh_order_book(t(this,M)),console.log("worker.js: WebSocket connection opened")}),e.addEventListener("close",()=>{console.log("worker.js: WebSocket connection closed")});let s=!1;e.addEventListener("message",async o=>{let n=JSON.parse(o.data);if(n.stream.endsWith("@aggTrade")){let a=n.data;t(this,q).push({x:a.T,y:parseFloat(a.p),q:parseFloat(a.q),m:a.m})}else if(n.stream.endsWith("@depth@100ms")){if(s){console.log("isHandlingDepth:",s);return}s=!0,await this.handleDepth(n.data),s=!1}else n.stream.endsWith("@kline_1m")&&(c(this,at,n.data),i({kline:t(this,at),depth:this.order_book.order_book,tradesBuffer:t(this,q)}),c(this,q,[]))})}async handleDepth(e){let i=e.u,s=e.U,o=e.pu;if(i<this.last_update_id){console.log("finalUpdateId < last_update_id",i,this.last_update_id);return}if(t(this,H))if(s<=this.last_update_id&&this.last_update_id<=i)console.log("First processed event succeed."),c(this,H,!1);else{await this.reinitializeOrderBook(t(this,M));return}else if(o!=this.last_update_id){await this.reinitializeOrderBook(t(this,M));return}await this.order_book.update_order_book(e.b,e.a),this.last_update_id=i}async reinitializeOrderBook(e){console.log("Out of sync, reinitializing order book...");const i=await ft(e);this.last_update_id=i.lastUpdateId,this.order_book.order_book=this.order_book.initialize_order_book(i.bids,i.asks),c(this,q,[])}}W=new WeakMap,q=new WeakMap,at=new WeakMap,M=new WeakMap,H=new WeakMap;class Ut{constructor(e,i){v(this,"currentSymbol");v(this,"shouldRefresh",!0);v(this,"order_book");console.log("worker.js: Initializing OrderBook"),this.order_book=this.initialize_order_book(e,i)}initialize_order_book(e,i){let s=e.map(n=>n.map(Number)),o=i.map(n=>n.map(Number));return{bids:s,asks:o}}async refresh_order_book(e){this.currentSymbol=e;let i=new AbortController,s=setInterval(async()=>{if(!this.shouldRefresh||e!==this.currentSymbol)clearInterval(s),i.abort();else{i=new AbortController;try{let o=await ft(e,{signal:i.signal});this.order_book=this.initialize_order_book(o.bids,o.asks)}catch(o){o.name==="AbortError"?console.log("Fetch operation aborted"):console.error("Error fetching order book:",o)}}},6e3)}async update_order_book(e,i){let s=e.map(n=>n.map(Number)),o=i.map(n=>n.map(Number));[this.order_book.bids,this.order_book.asks]=await this.prepare_order_book(this.order_book.bids,this.order_book.asks,s,o)}async prepare_order_book(e,i,s,o){try{const n=new Map([...e,...s].filter(d=>d[0]>=e[e.length-1][0])),a=new Map([...i,...o].filter(d=>d[0]<=i[i.length-1][0]));let l=Array.from(n.entries()).filter(d=>d[1]!==0).sort((d,k)=>k[0]-d[0]),u=Array.from(a.entries()).filter(d=>d[1]!==0).sort((d,k)=>d[0]-k[0]);return l[0][0]>=u[0][0]&&(l=l.filter(d=>d[0]<s[s.length-1][0]),u=u.filter(d=>d[0]>o[0][0]),console.log("Error: bids[0] >= asks[0], rehandled to: ",l[0][0],u[0][0])),[l,u]}catch(n){return console.error("Error preparing order book:",n),s=s.filter(a=>a[0]>=e[e.length-1][0]),o=o.filter(a=>a[0]<=i[i.length-1][0]),[s,o]}}}async function ft(r){return await(await fetch(`https://fapi.binance.com/fapi/v1/depth?symbol=${r}&limit=500`)).json()}const ut=["btn1","btn2","btn3","btn4"],jt=["tickers-menu","menu2","menu3","settings-menu"],Wt=[Mt,_t,_t,Qt];for(let r=0;r<ut.length;r++){const e=document.getElementById(ut[r]);e.addEventListener("click",Wt[r]),e.addEventListener("click",function(){yt(ut[r],jt[r])})}const kt=document.getElementById("tickers-menu"),wt=document.getElementById("settings-menu");let bt=document.getElementById("ticker-search"),ht;bt.addEventListener("keyup",function(){ht=this.value.toLowerCase();let r=document.querySelectorAll("#ticker-table tbody tr");for(let e of r)e.cells[0].textContent.toLowerCase().includes(ht)?e.style.display="":e.style.display="none"});function qt(r){bt.value="",ht="";let e=document.querySelectorAll("#ticker-table tbody tr");for(let i of e)i.style.display="";Vt(r),Mt()}function Ft(){const r=new Date,e=r.getHours().toString().padStart(2,"0"),i=r.getMinutes().toString().padStart(2,"0"),s=r.getSeconds().toString().padStart(2,"0");return e+":"+i+":"+s}function xt(){const r=document.getElementById("tickers-update-info");r.textContent="Last updated at "+Ft()}window.onload=function(){vt().then(r=>{Tt(r),xt()})};window.addEventListener("resize",function(){console.log("resize")});function yt(r,e){const i=document.getElementById(e),s=document.getElementById(r);i.style.display==="block"?s.classList.add("active"):s.classList.remove("active")}function Mt(){bt.value="",ht="";let r=document.querySelectorAll("#ticker-table tbody tr");for(let e of r)e.style.display="";kt.style.display=kt.style.display==="none"?"block":"none",yt("btn1","tickers-menu")}function _t(){console.log("show menu")}function Qt(){wt.style.display=wt.style.display==="none"?"block":"none",yt("btn4","settings-menu")}const pt=document.getElementById("tickers-update-btn");pt.addEventListener("click",function(){pt.disabled=!0,vt().then(r=>{Tt(r),xt()})});function St(r){return r>=1e9?(r/1e9).toFixed(2)+"b":r>=1e6?(r/1e6).toFixed(2)+"m":r>=1e3?(r/1e3).toFixed(2)+"k":r}function mt(r,e,i){let s;return e==="mark_price"?r>10?s=Math.round(r*100)/100:s=Math.round(r*1e4)/1e4:e==="volume"?(s=St(r),s="$"+s):e==="open_interest"&&(s=St(r*i),s="$"+s),s}function Tt(r){let e=document.querySelector("#tickers-menu table tbody"),i=Object.entries(r);i.sort(([,s],[,o])=>o.volume-s.volume);for(let s=0;s<i.length;s++){let[o,n]=i[s],a;s<e.rows.length?a=e.rows[s]:(a=e.insertRow(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell(),a.insertCell()),a.classList.add("table-row"),a.cells[0].textContent=o,a.cells[1].textContent=mt(n.mark_price,"mark_price",n.mark_price),a.cells[2].textContent=(Math.round(n.change*100)/100).toFixed(2)+"%",a.cells[3].textContent=n.funding_rate+"%",a.cells[4].textContent=mt(n.open_interest,"open_interest",n.mark_price),a.cells[5].textContent=n.OI_24hrChange+"%",a.cells[6].textContent=mt(n.volume,"volume",n.mark_price);const l=Math.min(Math.abs(n.change/100),1),u=Math.max(Math.abs(n.funding_rate*50),.2);n.change<0?a.style.backgroundColor="rgba(192, 80, 78, "+l*1.5+")":a.style.backgroundColor="rgba(81, 205, 160, "+l+")",n.funding_rate>0?a.cells[3].style.color="rgba(212, 80, 78, "+u*1.5+")":a.cells[3].style.color="rgba(81, 246, 160, "+u*1.5+")",a.addEventListener("click",function(){qt(o)})}pt.disabled=!1}const Zt=new Nt;function Vt(r){let e=document.createElement("canvas");e.id="canvas1",e.style.position="absolute",e.style.left="0px",e.style.top="0px",document.body.appendChild(e);let i=document.querySelector("#canvas1"),s=i.getContext("2d");i.width=window.innerWidth*.9,i.height=window.innerHeight*.9;let o=document.createElement("canvas");o.id="canvas2",o.style.position="absolute",o.style.left=i.width+"px",document.body.appendChild(o);let n=document.querySelector("#canvas2"),a=n.getContext("2d");n.width=window.innerWidth*.1,n.height=window.innerHeight*.9;let l=document.createElement("canvas");l.id="canvas3",l.style.position="absolute",l.style.left="0px",l.style.top=i.height+"px",document.body.appendChild(l);let u=document.querySelector("#canvas3"),d=u.getContext("2d");u.width=i.width,u.height=window.innerHeight*.1;const k=new Lt(s,i.width,i.height,a,n,n.width,n.height,d,u,u.width,u.height);Rt(r).then(S=>{k.tickSize=S,document.querySelector("#ticksize-select").dispatchEvent(new Event("change")),Zt.createWebSocket(r,m=>k.updateData(m))})}async function Rt(r){let s=(await(await fetch("https://fapi.binance.com/fapi/v1/exchangeInfo")).json()).symbols.find(o=>o.symbol===r);return s?s.filters[0].tickSize:null}
