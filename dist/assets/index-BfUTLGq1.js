var Yt=Object.defineProperty;var Gt=(h,i,e)=>i in h?Yt(h,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[i]=e;var tt=(h,i,e)=>(Gt(h,typeof i!="symbol"?i+"":i,e),e),Lt=(h,i,e)=>{if(!i.has(h))throw TypeError("Cannot "+e)};var t=(h,i,e)=>(Lt(h,i,"read from private field"),e?e.call(h):i.get(h)),a=(h,i,e)=>{if(i.has(h))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(h):i.set(h,e)},r=(h,i,e,s)=>(Lt(h,i,"write to private field"),s?s.call(h,e):i.set(h,e),e);var j=(h,i,e)=>(Lt(h,i,"access private method"),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const I={x:0,y:0};window.addEventListener("mousemove",function(h){I.x=h.x,I.y=h.y});var p,K,N,yt,Wt,bt,zt;class Xt{constructor(i,e,s){a(this,yt);a(this,bt);tt(this,"flowFieldAnimation");a(this,p,void 0);a(this,K,void 0);a(this,N,void 0);r(this,p,i),t(this,p).strokeStyle="#C8C8C8",t(this,p).lineWidth=1,r(this,K,e),r(this,N,s),this.lastTime=0,this.interval=1e3/60,this.timer=0,this.cellSize=15,this.gradient,j(this,yt,Wt).call(this),t(this,p).strokeStyle=this.gradient,this.radius=0,this.vr=.03}animate(i){const e=i-this.lastTime;if(this.lastTime=i,this.timer>this.interval){t(this,p).clearRect(0,0,t(this,K),t(this,N)),this.radius+=this.vr,(this.radius>5||this.radius<-5)&&(this.vr*=-1);for(let s=0;s<t(this,N);s+=this.cellSize)for(let n=0;n<t(this,K);n+=this.cellSize){const o=(Math.cos(I.x*n*1e-5)+Math.sin(I.y*s*1e-5))*this.radius;j(this,bt,zt).call(this,o,n,s)}this.timer=0}else this.timer+=e;this.flowFieldAnimation=requestAnimationFrame(this.animate.bind(this))}}p=new WeakMap,K=new WeakMap,N=new WeakMap,yt=new WeakSet,Wt=function(){this.gradient=t(this,p).createLinearGradient(0,0,t(this,K),t(this,N)),this.gradient.addColorStop(0,"#ADD8E6"),this.gradient.addColorStop(.25,"#77DD77"),this.gradient.addColorStop(.5,"#F5F5DC"),this.gradient.addColorStop(.75,"#E6E6FA"),this.gradient.addColorStop(1,"#FFD1DC")},bt=new WeakSet,zt=function(i,e,s){let n=e,o=s,d=I.x-n,f=I.y-o,u=d*d+f*f;u>6e5?u=6e5:u<5e4&&(u=5e4);let E=u/1e4;t(this,p).beginPath(),t(this,p).moveTo(e,s),t(this,p).lineTo(e+Math.cos(i)*E,s+Math.sin(i)*E),t(this,p).stroke()};var v,Y,G,Ct,Bt,St,Ot;class $t{constructor(i,e,s){a(this,Ct);a(this,St);tt(this,"flowFieldAnimation");a(this,v,void 0);a(this,Y,void 0);a(this,G,void 0);r(this,v,i),t(this,v).strokeStyle="#C8C8C8",t(this,v).lineWidth=5,r(this,Y,e),r(this,G,s),this.lastTime=0,this.interval=1e3/60,this.timer=0,this.cellSize=10,this.gradient,j(this,Ct,Bt).call(this),t(this,v).strokeStyle=this.gradient}animate(i){const e=i-this.lastTime;if(this.lastTime=i,this.timer>this.interval){t(this,v).clearRect(0,0,t(this,Y),t(this,G));for(let s=0;s<t(this,G);s+=this.cellSize)for(let n=0;n<t(this,Y);n+=this.cellSize){const o=Math.cos(n)+Math.sin(s);j(this,St,Ot).call(this,o,n,s)}this.timer=0}else this.timer+=e;this.flowFieldAnimation=requestAnimationFrame(this.animate.bind(this))}}v=new WeakMap,Y=new WeakMap,G=new WeakMap,Ct=new WeakSet,Bt=function(){this.gradient=t(this,v).createLinearGradient(0,0,t(this,Y),t(this,G)),this.gradient.addColorStop(0,"#FF0000"),this.gradient.addColorStop(.25,"#FFFF00"),this.gradient.addColorStop(.5,"#00FF00"),this.gradient.addColorStop(.75,"#00FFFF"),this.gradient.addColorStop(1,"#0000FF")},St=new WeakSet,Ot=function(i,e,s){t(this,v).beginPath(),t(this,v).moveTo(e,s),t(this,v).lineTo(e+i,s+i),t(this,v).stroke()};var S,Z,D,et,P,Mt,Tt,Rt;class jt{constructor(i,e,s){a(this,Tt);tt(this,"flowFieldAnimation");a(this,S,void 0);a(this,Z,void 0);a(this,D,void 0);a(this,et,[]);a(this,P,20);a(this,Mt,10);r(this,S,i),t(this,S).strokeStyle="#C8C8C8",t(this,S).lineWidth=1,r(this,Z,e),r(this,D,s),this.lastTime=0,this.timer=0}animate(i){const e=i-this.lastTime;if(this.lastTime=i,this.timer>t(this,Mt)*1e3){const s=Math.random()*t(this,D),n=Math.floor(s/t(this,P)),o=Array(n).fill().map(()=>{const d=Math.random();return d<1/3?"#C0504E":d<2/3?"#51CDA0":null});t(this,et).push({x:t(this,Z),height:s,cells:o}),this.timer=0}else this.timer+=e;if(this.timer%1e3<e){t(this,S).clearRect(0,0,t(this,Z),t(this,D));for(let s of t(this,et))s.x-=t(this,P),j(this,Tt,Rt).call(this,s)}this.movingBoxes=requestAnimationFrame(this.animate.bind(this))}}S=new WeakMap,Z=new WeakMap,D=new WeakMap,et=new WeakMap,P=new WeakMap,Mt=new WeakMap,Tt=new WeakSet,Rt=function(i){t(this,S).beginPath(),t(this,S).rect(i.x,t(this,D)-i.height,t(this,P),i.height),t(this,S).stroke(),i.cells.forEach((e,s)=>{e&&(t(this,S).fillStyle=e,t(this,S).fillRect(i.x,t(this,D)-(s+1)*t(this,P),t(this,P),t(this,P)))})};var _,X,st,nt,J;class It{constructor(i,e,s,n,o,d,f,u,E,g){tt(this,"zoomLevel",.2222);a(this,_,void 0);a(this,X,void 0);a(this,st,void 0);a(this,nt,void 0);a(this,J,[]);r(this,_,new Zt(this,i,e,s)),r(this,X,new _t(this,n,o,d,f)),r(this,st,new Jt(this,u,E,g)),r(this,nt,new WebSocket("wss://fstream.binance.com/stream?streams=btcusdt@kline_1m/btcusdt@aggTrade")),t(this,nt).onmessage=T=>{const C=JSON.parse(T.data);C.stream.endsWith("@aggTrade")?t(this,J).push({x:C.data.T,y:parseFloat(C.data.p),q:parseFloat(C.data.q),m:C.data.m}):C.stream.endsWith("@kline_1m")&&(t(this,_).updateData(C.data,t(this,J)),t(this,X).updateData(C.data),t(this,st).updateData(C.data),r(this,J,[]))},t(this,X).canvas.addEventListener("wheel",T=>{T.preventDefault();const C=5e-4/(.01-.001);let Nt=this.zoomLevel-(T.deltaY>0?-C:C);this.zoomLevel=Math.max(0,Math.min(Nt,1)),t(this,_).zoom(this.zoomLevel),t(this,X).zoom(this.zoomLevel)})}}_=new WeakMap,X=new WeakMap,st=new WeakMap,nt=new WeakMap,J=new WeakMap;var xt,c,k,M,q,Q,W,$,ht,x,at,Et,y,ot,rt;class Zt{constructor(i,e,s,n){a(this,xt,void 0);a(this,c,void 0);a(this,k,void 0);a(this,M,void 0);a(this,q,[]);a(this,Q,[]);a(this,W,void 0);a(this,$,[]);a(this,ht,void 0);a(this,x,void 0);a(this,at,void 0);a(this,Et,60);a(this,y,void 0);a(this,ot,.997);a(this,rt,1.003);r(this,xt,i),r(this,c,e),r(this,k,s),r(this,M,n),r(this,y,Math.round(1*60*1e3/(30*60*1e3)*(t(this,k)-t(this,Et))))}zoom(i){const d=.001+.009000000000000001*i,f=.001+(.01-.001)*i;r(this,ot,Math.round((1-d)*1e4)/1e4),r(this,rt,Math.round((1+f)*1e4)/1e4)}updateData(i,e){const{k:{t:s,T:n,o,h:d,l:f,c:u}}=i;r(this,x,Math.min(o*t(this,ot),f)),r(this,at,Math.max(o*t(this,rt),d)),t(this,ht)!==o&&(t(this,W)&&(t(this,q).push(t(this,W)),t(this,Q).push(t(this,$)),t(this,q).length>60&&(t(this,q).shift(),t(this,Q).shift()),r(this,$,[])),r(this,ht,o)),r(this,W,{startTime:s,endTime:n,openPrice:o,highPrice:d,lowPrice:f,closePrice:u}),t(this,$).push(e),this.drawStart()}drawStart(){if(t(this,c).clearRect(0,0,t(this,k),t(this,M)),t(this,q).length>0){const i=t(this,W).startTime-18e5;t(this,q).forEach((e,s)=>{const n=t(this,Q)[s],o=Math.round((e.startTime-i)/(30*60*1e3)*(t(this,k)-t(this,y)));this.drawDataPoint(n,e,o)})}this.drawDataPoint(t(this,$),t(this,W),Math.round(t(this,k)-t(this,y)))}drawDataPoint(i,e,s){const n=t(this,M)/(t(this,at)-t(this,x)),o=Math.round(t(this,M)-(e.openPrice-t(this,x))*n),d=Math.round(t(this,M)-(e.highPrice-t(this,x))*n),f=Math.round(t(this,M)-(e.lowPrice-t(this,x))*n),u=Math.round(t(this,M)-(e.closePrice-t(this,x))*n);this.drawKlineAt(s,d-2,"#c8c8c8"),this.drawKlineAt(s,f+2,"#c8c8c8"),i.forEach(E=>{E.forEach(g=>{const T=Math.round(t(this,M)-(g.y-t(this,x))*n);g.q<.01?this.drawTradesAt(s,T,g.m,.04):g.q<.1?this.drawTradesAt(s,T,g.m,.08):g.q<1?this.drawTradesAt(s,T,g.m,.18):g.q<10?this.drawTradesAt(s,T,g.m,.4):g.q<100&&this.drawTradesAt(s,T,g.m,.9)})}),t(this,c).beginPath(),t(this,c).moveTo(s+t(this,y)/2,o),t(this,c).lineTo(s+t(this,y)/2,u),t(this,c).strokeStyle=u<o?"#9BE6D1":"#E6A1A0",t(this,c).stroke()}drawKlineAt(i,e,s){t(this,c).beginPath(),t(this,c).moveTo(i,e),t(this,c).lineTo(i+t(this,y),e),t(this,c).strokeStyle=s,t(this,c).stroke()}drawTradesAt(i,e,s,n){t(this,c).beginPath(),s?(t(this,c).moveTo(i-2+t(this,y)/2,e),t(this,c).lineTo(i-2+t(this,y)/2-15,e),t(this,c).strokeStyle=`rgba(192, 80, 77, ${n})`):(t(this,c).moveTo(i+2+t(this,y)/2,e),t(this,c).lineTo(i+2+t(this,y)/2+15,e),t(this,c).strokeStyle=`rgba(81, 205, 160, ${n})`),t(this,c).stroke()}}xt=new WeakMap,c=new WeakMap,k=new WeakMap,M=new WeakMap,q=new WeakMap,Q=new WeakMap,W=new WeakMap,$=new WeakMap,ht=new WeakMap,x=new WeakMap,at=new WeakMap,Et=new WeakMap,y=new WeakMap,ot=new WeakMap,rt=new WeakMap;var Pt,z,lt,F,dt,B,U,ct,mt;class _t{constructor(i,e,s,n,o){a(this,Pt,void 0);a(this,z,void 0);a(this,lt,void 0);a(this,F,void 0);a(this,dt,void 0);a(this,B,void 0);a(this,U,void 0);a(this,ct,.997);a(this,mt,1.003);r(this,Pt,i),r(this,z,e),this.canvas=s,r(this,lt,n),r(this,F,o)}zoom(i){const d=.001+.009000000000000001*i,f=.001+(.01-.001)*i;r(this,ct,Math.round((1-d)*1e4)/1e4),r(this,mt,Math.round((1+f)*1e4)/1e4)}updateData(i){const{k:{o:e,h:s,l:n,c:o}}=i;r(this,dt,{openPrice:e,highPrice:s,lowPrice:n,closePrice:o}),r(this,B,Math.min(e*t(this,ct),n)),r(this,U,Math.max(e*t(this,mt),s)),this.drawLine()}drawLine(){t(this,z).clearRect(0,0,t(this,lt),t(this,F));const i=t(this,F)/(t(this,U)-t(this,B)),{closePrice:e,openPrice:s}=t(this,dt),n=Math.round(t(this,F)-(e-t(this,B))*i),o=Math.round(t(this,F)-(s-t(this,B))*i),d=n>o?"#C0504E":n<o?"#51CDA0":"#c8c8c8";this.drawTextAt(n,e,d),this.drawTextAt(t(this,F)-10,Math.round(t(this,B)),"#c8c8c8"),this.drawTextAt(15,Math.round(t(this,U)),"#c8c8c8")}drawTextAt(i,e,s){t(this,z).font="14px monospace",t(this,z).fillStyle=s,t(this,z).fillText(e,10,i)}}Pt=new WeakMap,z=new WeakMap,lt=new WeakMap,F=new WeakMap,dt=new WeakMap,B=new WeakMap,U=new WeakMap,ct=new WeakMap,mt=new WeakMap;var Ft,w,O,b,A,R,ut,wt,At,H;class Jt{constructor(i,e,s,n){a(this,Ft,void 0);a(this,w,void 0);a(this,O,void 0);a(this,b,void 0);a(this,A,[]);a(this,R,void 0);a(this,ut,void 0);a(this,wt,void 0);a(this,At,60);a(this,H,void 0);r(this,Ft,i),r(this,w,e),r(this,O,s),r(this,b,n),r(this,H,Math.round(1*60*1e3/(30*60*1e3)*(t(this,O)-t(this,At))))}updateData(i){const{k:{t:e,T:s,v:n,V:o}}=i,d=n-o;r(this,wt,Math.round(t(this,A).reduce((f,u)=>Math.max(f,u.buyVolume,u.sellVolume),Math.max(o,d)))),t(this,ut)!==e&&(t(this,R)&&(t(this,A).push(t(this,R)),t(this,A).length>60&&t(this,A).shift()),r(this,ut,e)),r(this,R,{startTime:e,endTime:s,buyVolume:o,sellVolume:d}),this.drawStart()}drawStart(){if(t(this,w).clearRect(0,0,t(this,O),t(this,b)),t(this,A).length>0){const i=t(this,R).startTime-18e5;t(this,A).forEach((e,s)=>{const n=Math.round((e.startTime-i)/18e5*(t(this,O)-t(this,H)));this.drawDataPoint(e,n)})}this.drawDataPoint(t(this,R),Math.round(t(this,O)-t(this,H)))}drawDataPoint(i,e){const s=(t(this,b)-20)/t(this,wt),n=Math.max(0,Math.min(t(this,b)-20,Math.round(t(this,b)-20-i.buyVolume*s))),o=Math.max(0,Math.min(t(this,b)-20,Math.round(t(this,b)-20-i.sellVolume*s)));t(this,w).beginPath(),t(this,w).moveTo(e,0),t(this,w).lineTo(e,t(this,b)-20),t(this,w).strokeStyle="rgba(200, 200, 200, 0.4)",t(this,w).lineWidth=1,t(this,w).stroke(),this.drawTimeLabel(e,i.startTime),this.drawKlineAt(e+t(this,H)/2+5,n,"#51CDA0"),this.drawKlineAt(e+t(this,H)/2-5,o,"#C0504E")}drawKlineAt(i,e,s){t(this,w).beginPath(),t(this,w).moveTo(i,t(this,b)-20),t(this,w).lineTo(i,e),t(this,w).strokeStyle=s,t(this,w).lineWidth=5,t(this,w).stroke()}drawTimeLabel(i,e){const s=new Date(e),n=s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0");t(this,w).font="10px monospace",t(this,w).fillStyle="#c8c8c8",t(this,w).fillText(n,i,t(this,b)-5)}}Ft=new WeakMap,w=new WeakMap,O=new WeakMap,b=new WeakMap,A=new WeakMap,R=new WeakMap,ut=new WeakMap,wt=new WeakMap,At=new WeakMap,H=new WeakMap;const kt=["btn2","btn3","btn4","tbl-btn1","tbl-btn2","tbl-btn3","tbl-btn4"],Qt=[Vt,hi,Ut,Dt,ti,ii,ei];for(let h=0;h<kt.length;h++)document.getElementById(kt[h]).addEventListener("click",Qt[h]);const it=["settings-menu-0","settings-menu-1","settings-menu-2","settings-menu-3","settings-menu-4","menu"].map(h=>document.querySelector(`#${h}`)),ft=["tbl-btn1","tbl-btn2","tbl-btn3","tbl-btn4"].map(h=>document.querySelector(`#${h}`));let l,m,V,L=0;window.onload=function(){Dt()};window.addEventListener("resize",function(){Dt()});function Ht(){ft.forEach(h=>h.disabled=!1),it.forEach(h=>h.style.display="none")}function Vt(){it[5].style.display=it[5].style.display==="none"?"block":"none"}function Ut(){L>=0&&L<=4&&(it[L].style.display=it[L].style.display==="none"?"block":"none")}function gt(){if(Vt(),Ht(),V!=null){cancelAnimationFrame(V.flowFieldAnimation);let h=document.getElementsByTagName("canvas");for(;h.length>0;)h[0].parentNode.removeChild(h[0])}}function Dt(){gt(),ft[0].disabled=!0,L=1;let h=document.createElement("canvas");h.id="canvas1",document.body.appendChild(h),l=document.querySelector("#canvas1"),m=l.getContext("2d"),l.width=window.innerWidth,l.height=window.innerHeight,V=new Xt(m,l.width,l.height),V.animate(0)}function ti(){gt(),ft[1].disabled=!0,L=2;let h=document.createElement("canvas");h.id="canvas1",document.body.appendChild(h),l=document.querySelector("#canvas1"),m=l.getContext("2d"),l.width=window.innerWidth,l.height=window.innerHeight,V=new $t(m,l.width,l.height),V.animate(0)}function ii(){gt(),ft[2].disabled=!0,L=3;let h=document.createElement("canvas");h.id="canvas1",h.style.position="absolute",h.style.left="0px",h.style.top="0px",document.body.appendChild(h),l=document.querySelector("#canvas1"),m=l.getContext("2d"),l.width=window.innerWidth*.9,l.height=window.innerHeight*.9;let i=document.createElement("canvas");i.id="canvas2",i.style.position="absolute",i.style.left=l.width+"px",document.body.appendChild(i);let e=document.querySelector("#canvas2"),s=e.getContext("2d");e.width=window.innerWidth*.1,e.height=window.innerHeight*.9;let n=document.createElement("canvas");n.id="canvas3",n.style.position="absolute",n.style.left="0px",n.style.top=l.height+"px",document.body.appendChild(n);let o=document.querySelector("#canvas3"),d=o.getContext("2d");o.width=l.width,o.height=window.innerHeight*.1,new It(m,l.width,l.height,s,e,e.width,e.height,d,o.width,o.height)}function ei(){gt(),ft[3].disabled=!0,L=4;let h=document.createElement("canvas");h.id="canvas1",document.body.appendChild(h),l=document.querySelector("#canvas1"),m=l.getContext("2d"),l.width=window.innerWidth,l.height=window.innerHeight,V=new jt(m,l.width,l.height),V.animate(0)}const pt=document.querySelector("#settings-menu-0 > input.js-color-picker.color-picker"),vt=document.querySelector("#settings-menu-0 > input.js-line-range"),Kt=document.querySelector("#settings-menu-0 > label"),qt=document.querySelector("#settings-menu-0 > input.js-eraser-button"),si=h=>{m.strokeStyle=h.target.value},ni=h=>{const i=h.target.value;Kt.innerHTML=i,m.lineWidth=i};pt.addEventListener("change",si);vt.addEventListener("input",ni);function hi(){L=0;let h=!1;pt.value="#C8C8C8",vt.value="1",Kt.innerHTML="1",qt.checked=!1,Ht(),gt();let i=document.createElement("canvas");i.id="canvas1",document.body.appendChild(i),l=document.querySelector("#canvas1"),l.width=window.innerWidth,l.height=window.innerHeight,m=l.getContext("2d"),m.lineCap="round",m.strokeStyle=pt.value;let e=0,s=0,n=!1;const o=()=>{n=!1},d=u=>{n=!0,[e,s]=[u.offsetX,u.offsetY]},f=u=>{if(n){const E=u.offsetX,g=u.offsetY;m.beginPath(),m.moveTo(e,s),m.lineTo(E,g),m.stroke(),e=E,s=g}};l.addEventListener("mousedown",d),l.addEventListener("mousemove",f),l.addEventListener("mouseup",o),l.addEventListener("mouseout",o),qt.addEventListener("click",()=>{h=!h,h?(m.globalCompositeOperation="destination-out",m.lineWidth=vt.value*4):(m.globalCompositeOperation="source-over",m.lineWidth=vt.value*4,m.strokeStyle=pt.value)})}
